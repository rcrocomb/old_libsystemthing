<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CIL Systems Programming Library: cpuset Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>cpuset Class Reference</h1><!-- doxytag: class="cpuset" --><code>#include &lt;<a class="el" href="cpuset_8h-source.html">cpuset.h</a>&gt;</code>
<p>
Collaboration diagram for cpuset:<p><center><img src="classcpuset__coll__graph.png" border="0" usemap="#cpuset__coll__map" alt="Collaboration graph"></center>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><a href="classcpuset-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#4866c8cd2b292c23171536e8179eb171">cpuset</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#f8ece6cd82fbfe57a2d8d25be8c5e85f">cpuset</a> (const std::string &amp;name, const std::string &amp;cpus, <a class="el" href="classcpuset.html">cpuset</a> *parent_cpuset, bool cpu_is_exclusive=true, bool mem_is_exclusive=true, bool migrate_memory=true, bool notify_on_release=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#dd1e3abc75e7c93b58250779743ea7e0">~cpuset</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#8193a0d34a534ced54021c5ee5a7ea47">cpu_is_exclusive</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#d93a5e2b7fc41b8ed964b6d9d815c09d">mem_is_exclusive</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#5d8d12278e318a2b9d037bd4e787f74e">migrate_memory</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#fc1632bdc6143432541b4d43da13ef40">notify_on_release</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#7c478b56188544448ec57eef513ff676">path</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="cpuset_8h.html#03658338ac8779ffa33ef3186667ac97">cpu_vector_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#d1aa42aeb69e49f03e118ba96e590325">CPUs</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="cpuset_8h.html#371dad33c80e1c2ca7f98fd51ff44f5a">pid_vector_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#f516975f2cdf0589a2dc033271a7fb03">pids</a> (void) const</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#a1e448d1ccfce7466e0d31f1ebaf34fa">add_task</a> (pid_t process)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcpuset.html#48e1ee76a44b537e36ca5427a020db1e">print</a> (void) const</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00038">38</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4866c8cd2b292c23171536e8179eb171"></a><!-- doxytag: member="cpuset::cpuset" ref="4866c8cd2b292c23171536e8179eb171" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpuset::cpuset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Only the root cpuset should do this mount. The mere act of mkdir within this parent will do the proper thing for children.<p>
These values for exclusivity, etc. are the ones Linux uses when a root cpuset is mounted. You can't alter the attributes of the root cpuset, so I'll just stick these values here so they're likely to be right (untrue if Linux defaults change: *highly* unlikely).<p>
The root cpuset gets an extra filename, 'memory_pressure_enabled', which is disabled by default. I'm leaving it alone. Note that there's no capability included to support it.<p>
Must new the name_ and path_ variables because of delete in destructor: otherwise deleting statically allocated stuff. 
<p>
Definition at line <a class="el" href="cpuset_8cpp-source.html#l00097">97</a> of file <a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a>.
<p>
References <a class="el" href="program__IO_8h-source.html#l00146">C</a>, <a class="el" href="program__IO_8h-source.html#l00147">CP</a>, <a class="el" href="cpuset_8cpp-source.html#l00062">CS_CPRINT</a>, <a class="el" href="cpuset_8cpp-source.html#l00065">CS_ERROR</a>, <a class="el" href="cpuset_8cpp-source.html#l00066">CS_RUNTIME</a>, <a class="el" href="cpuset_8cpp-source.html#l00064">CS_WARNING</a>, <a class="el" href="utility_8cpp-source.html#l00046">utility::how_many_cpus()</a>, and <a class="el" href="cpuset_8cpp.html#d3ad298af5d072057b84f2f0e1bd8ea86fd92dbe7ab719a4a558204d48071865">TRIES</a>.<div class="fragment"><pre class="fragment"><a name="l00097"></a>00097                   :
<a name="l00098"></a>00098     name_(<span class="keyword">new</span> std::string(<a class="code" href="namespacecpuset__constants.html#ef42dac49ef38ec9c0d2eaab5ee4656d">cpuset_constants::ROOT_NAME</a>)),
<a name="l00099"></a>00099     path_(<span class="keyword">new</span> std::string(CPUSET_PATH)),
<a name="l00100"></a>00100     CPUs_(<span class="keyword">new</span> <a class="code" href="cpuset_8h.html#03658338ac8779ffa33ef3186667ac97">cpu_vector_t</a>()),
<a name="l00101"></a>00101     pids_(<span class="keyword">new</span> <a class="code" href="cpuset_8h.html#371dad33c80e1c2ca7f98fd51ff44f5a">pid_vector_t</a>()),
<a name="l00102"></a>00102     cpu_is_exclusive_(<span class="keyword">true</span>),
<a name="l00103"></a>00103     mem_is_exclusive_(<span class="keyword">true</span>),
<a name="l00104"></a>00104     migrate_memory_(<span class="keyword">false</span>),
<a name="l00105"></a>00105     notify_on_release_(<span class="keyword">false</span>),
<a name="l00106"></a>00106     parent_(0),
<a name="l00107"></a>00107     children_()
<a name="l00108"></a>00108 {
<a name="l00109"></a>00109     <span class="keywordtype">int</span> ret;
<a name="l00110"></a>00110     <span class="keywordtype">unsigned</span> tries = 0;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (number_cpus_)
<a name="l00113"></a>00113         <a class="code" href="cpuset_8cpp.html#af50da82c64b0a3da73e4f6a3534c729">CS_RUNTIME</a>(<span class="stringliteral">"To be used only once to create root cpuset!"</span>);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     number_cpus_ = <a class="code" href="namespaceutility.html#d001eef34afc535fc5725a08cb2c9a90">utility::how_many_cpus</a>();
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 try_again:
<a name="l00118"></a>00118     ret = mkdir(<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_), 0755);
<a name="l00119"></a>00119     <span class="keywordflow">if</span> (ret)
<a name="l00120"></a>00120     {
<a name="l00121"></a>00121         <span class="keywordflow">if</span> (errno == EEXIST)
<a name="l00122"></a>00122         {
<a name="l00123"></a>00123             <span class="keywordflow">if</span> (!tries)
<a name="l00124"></a>00124                 <a class="code" href="cpuset_8cpp.html#ba4d20a474d7a8a649dc20517f78e8f9">CS_CPRINT</a>(<span class="stringliteral">"Root set exists.  Failed to cleanup?  "</span>
<a name="l00125"></a>00125                           <span class="stringliteral">"Trying to purge\n"</span>);
<a name="l00126"></a>00126 
<a name="l00127"></a>00127             ++tries;
<a name="l00128"></a>00128             <span class="keywordflow">if</span> (tries &lt; <a class="code" href="cpuset_8cpp.html#d3ad298af5d072057b84f2f0e1bd8ea86fd92dbe7ab719a4a558204d48071865">TRIES</a>)
<a name="l00129"></a>00129             {
<a name="l00130"></a>00130                 remove_root_cpuset();
<a name="l00131"></a>00131                 <span class="keywordflow">goto</span> try_again;
<a name="l00132"></a>00132             }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134             <span class="comment">// Screw it, we'll just use it</span>
<a name="l00135"></a>00135             <a class="code" href="cpuset_8cpp.html#e6ea31ceb0de64404a8059f28e13fa69">CS_WARNING</a>(<span class="stringliteral">"Root cpuset exists and we couldn't remove it: "</span>
<a name="l00136"></a>00136                        <span class="stringliteral">"there may be existing child sets.\n"</span>
<a name="l00137"></a>00137                        <span class="stringliteral">"Attempting to continue.\n"</span>);
<a name="l00138"></a>00138             <span class="keywordflow">return</span>;
<a name="l00139"></a>00139         }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"%s: failed to create path at '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_), <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00142"></a>00142     }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     ret = mount(<a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(ROOT_LABEL), <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_), <span class="stringliteral">"cpuset"</span>, 0, 0);
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (ret)
<a name="l00146"></a>00146         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"Couldn't create root cpuset at '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00147"></a>00147 
<a name="l00148"></a>00148     CPUs_-&gt;reserve(number_cpus_);
<a name="l00149"></a>00149     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; number_cpus_; ++i)
<a name="l00150"></a>00150         CPUs_-&gt;push_back(i);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152     <span class="comment">// leave pids_ empty for lack of anything better</span>
<a name="l00153"></a>00153 }

</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="classcpuset_4866c8cd2b292c23171536e8179eb171_cgraph.png" border="0" usemap="#classcpuset_4866c8cd2b292c23171536e8179eb171_cgraph_map" alt=""></center>
<map name="classcpuset_4866c8cd2b292c23171536e8179eb171_cgraph_map">
<area href="namespaceutility.html#d001eef34afc535fc5725a08cb2c9a90" shape="rect" coords="178,5,356,32" alt="">
</map>

</div>
</div><p>
<a class="anchor" name="f8ece6cd82fbfe57a2d8d25be8c5e85f"></a><!-- doxytag: member="cpuset::cpuset" ref="f8ece6cd82fbfe57a2d8d25be8c5e85f" args="(const std::string &amp;name, const std::string &amp;cpus, cpuset *parent_cpuset, bool cpu_is_exclusive=true, bool mem_is_exclusive=true, bool migrate_memory=true, bool notify_on_release=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpuset::cpuset           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>cpus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcpuset.html">cpuset</a> *&nbsp;</td>
          <td class="paramname"> <em>parent_cpuset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>cpu_is_exclusive</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>mem_is_exclusive</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>migrate_memory</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>notify_on_release</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Should I worry about chmod'ing any created directories? 
<p>
Definition at line <a class="el" href="cpuset_8cpp-source.html#l00160">160</a> of file <a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a>.
<p>
References <a class="el" href="program__IO_8h-source.html#l00146">C</a>, <a class="el" href="program__IO_8h-source.html#l00147">CP</a>, <a class="el" href="cpuset_8cpp-source.html#l00050">CPU_EXCLUSIVE_OFF</a>, <a class="el" href="cpuset_8cpp-source.html#l00049">CPU_EXCLUSIVE_ON</a>, <a class="el" href="cpuset_8cpp-source.html#l00062">CS_CPRINT</a>, <a class="el" href="cpuset_8cpp-source.html#l00065">CS_ERROR</a>, <a class="el" href="cpuset_8cpp-source.html#l00067">CS_REPORT</a>, <a class="el" href="cpuset_8cpp-source.html#l00066">CS_RUNTIME</a>, <a class="el" href="cpuset_8cpp-source.html#l00053">MEM_EXCLUSIVE_OFF</a>, <a class="el" href="cpuset_8cpp-source.html#l00052">MEM_EXCLUSIVE_ON</a>, <a class="el" href="cpuset_8cpp-source.html#l00056">MEM_MIGRATE_OFF</a>, <a class="el" href="cpuset_8cpp-source.html#l00055">MEM_MIGRATE_ON</a>, <a class="el" href="cpuset_8cpp-source.html#l00059">RELEASE_NOTIFY_OFF</a>, and <a class="el" href="cpuset_8cpp-source.html#l00058">RELEASE_NOTIFY_ON</a>.<div class="fragment"><pre class="fragment"><a name="l00168"></a>00168  :
<a name="l00169"></a>00169     name_(<span class="keyword">new</span> std::string(<a class="code" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a>)),
<a name="l00170"></a>00170     path_(),
<a name="l00171"></a>00171     CPUs_(<span class="keyword">new</span> <a class="code" href="cpuset_8h.html#03658338ac8779ffa33ef3186667ac97">cpu_vector_t</a>()),
<a name="l00172"></a>00172     pids_(<span class="keyword">new</span> <a class="code" href="cpuset_8h.html#371dad33c80e1c2ca7f98fd51ff44f5a">pid_vector_t</a>()),
<a name="l00173"></a>00173     cpu_is_exclusive_(<a class="code" href="classcpuset.html#8193a0d34a534ced54021c5ee5a7ea47">cpu_is_exclusive</a>),
<a name="l00174"></a>00174     mem_is_exclusive_(<a class="code" href="classcpuset.html#d93a5e2b7fc41b8ed964b6d9d815c09d">mem_is_exclusive</a>),
<a name="l00175"></a>00175     migrate_memory_(<a class="code" href="classcpuset.html#5d8d12278e318a2b9d037bd4e787f74e">migrate_memory</a>),
<a name="l00176"></a>00176     notify_on_release_(<a class="code" href="classcpuset.html#fc1632bdc6143432541b4d43da13ef40">notify_on_release</a>),
<a name="l00177"></a>00177     parent_(parent_cpuset),
<a name="l00178"></a>00178     children_()
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (!number_cpus_)
<a name="l00181"></a>00181         <a class="code" href="cpuset_8cpp.html#af50da82c64b0a3da73e4f6a3534c729">CS_RUNTIME</a>(<span class="stringliteral">"Don't know how many CPUs are in system: "</span>
<a name="l00182"></a>00182                    <span class="stringliteral">"call set_cpu_count() before using!"</span>);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184     <span class="keywordtype">int</span> ret;
<a name="l00185"></a>00185     std::string cpulist_parsed;
<a name="l00186"></a>00186     std::string cmd;
<a name="l00187"></a>00187     std::string base_path((parent_ ? parent_-&gt;<a class="code" href="classcpuset.html#7c478b56188544448ec57eef513ff676">path</a>() : CPUSET_PATH));
<a name="l00188"></a>00188     path_ = <span class="keyword">new</span> std::string(base_path + <a class="code" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a> + <span class="stringliteral">"/"</span>);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190     <span class="comment">// Check for parent's directory</span>
<a name="l00191"></a>00191     cmd = DIR_EXISTS_COMMAND + base_path;
<a name="l00192"></a>00192     ret = system(<a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(cmd));
<a name="l00193"></a>00193     <span class="keywordflow">if</span> (ret)        <span class="comment">// test of parent directory failed: didn't return 0</span>
<a name="l00194"></a>00194         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"%s: couldn't create cpuset: directory of parent '%s' "</span>
<a name="l00195"></a>00195                  <span class="stringliteral">"not found?"</span>, <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a>), <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(parent_-&gt;<a class="code" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a>()));
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="comment">// See if list of CPUs is valid before creating subdirectory: less to</span>
<a name="l00198"></a>00198     <span class="comment">// clean up if it isn't.</span>
<a name="l00199"></a>00199     parse_cpulist(cpus, &amp;cpulist_parsed);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201     <span class="comment">// make the child directory</span>
<a name="l00202"></a>00202     ret = mkdir(<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_), 0755);
<a name="l00203"></a>00203     <span class="keywordflow">if</span> (ret)
<a name="l00204"></a>00204         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"%s: failed to create path at '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_), <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00205"></a>00205 <span class="preprocessor">#if 0</span>
<a name="l00206"></a>00206 <span class="preprocessor"></span>    <span class="comment">// go to that directory</span>
<a name="l00207"></a>00207     ret = chdir(<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00208"></a>00208     <span class="keywordflow">if</span> (ret)
<a name="l00209"></a>00209         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"Couldn't move to cpuset dir for cpuset '%s': '%s'"</span>,
<a name="l00210"></a>00210                  <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_), <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00211"></a>00211 <span class="preprocessor">#endif</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00213"></a>00213     <span class="keywordflow">try</span>
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215         add_cpulist_to_cpuset(cpulist_parsed);
<a name="l00216"></a>00216     } <span class="keywordflow">catch</span> (std::exception &amp;e)
<a name="l00217"></a>00217     {
<a name="l00218"></a>00218         <a class="code" href="cpuset_8cpp.html#ba4d20a474d7a8a649dc20517f78e8f9">CS_CPRINT</a>(<span class="stringliteral">"Failed setting cpus for '%s': trying to clean up"</span>,<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00219"></a>00219         ret = rmdir(<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00220"></a>00220         <span class="keywordflow">if</span> (ret)
<a name="l00221"></a>00221             <a class="code" href="cpuset_8cpp.html#bfd0995518dfb7f1fc4bbcf0bfff6378">CS_REPORT</a>(<span class="stringliteral">"%s: failed to remove CPUset: rmdir() failed"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00222"></a>00222         <span class="keyword">delete</span> name_;
<a name="l00223"></a>00223         <span class="keyword">delete</span> path_;
<a name="l00224"></a>00224         <span class="keyword">delete</span> CPUs_;
<a name="l00225"></a>00225         <span class="keyword">delete</span> pids_;
<a name="l00226"></a>00226         <span class="comment">// Can't have children yet: this is the constructor.</span>
<a name="l00227"></a>00227         <span class="keywordflow">throw</span>;
<a name="l00228"></a>00228     }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="comment">// set the various variables</span>
<a name="l00231"></a>00231     ret = system(<a class="code" href="classcpuset.html#8193a0d34a534ced54021c5ee5a7ea47">cpu_is_exclusive</a>
<a name="l00232"></a>00232                  ? <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#9086970b0754e1d4070de701abfc6e31">CPU_EXCLUSIVE_ON</a>(*path_))
<a name="l00233"></a>00233                  : <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#47a71b7da63afc525744f54c4c3f8804">CPU_EXCLUSIVE_OFF</a>(*path_)));
<a name="l00234"></a>00234     <span class="keywordflow">if</span> (ret)
<a name="l00235"></a>00235         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"configuring cpu_exclusive for cpuset '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00236"></a>00236 
<a name="l00237"></a>00237     ret = system(<a class="code" href="classcpuset.html#d93a5e2b7fc41b8ed964b6d9d815c09d">mem_is_exclusive</a>
<a name="l00238"></a>00238                  ? <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#cd864d380ee5eda5a1ed2a51599516dd">MEM_EXCLUSIVE_ON</a>(*path_))
<a name="l00239"></a>00239                  : <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#c94747ee8b506dee19b95df7f191db6e">MEM_EXCLUSIVE_OFF</a>(*path_)));
<a name="l00240"></a>00240     <span class="keywordflow">if</span> (ret)
<a name="l00241"></a>00241         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"configuring mem_exclusive for cpuset '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     ret = system(<a class="code" href="classcpuset.html#5d8d12278e318a2b9d037bd4e787f74e">migrate_memory</a>
<a name="l00244"></a>00244                  ? <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#60f5465b20df7461c6596a4adc37ed02">MEM_MIGRATE_ON</a>(*path_))
<a name="l00245"></a>00245                  : <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#129d9ba8e79d5d3d271c6d8ed6ab6647">MEM_MIGRATE_OFF</a>(*path_)));
<a name="l00246"></a>00246     <span class="keywordflow">if</span> (ret)
<a name="l00247"></a>00247         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"configuring memory_migrate for cpuset '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     ret = system(<a class="code" href="classcpuset.html#fc1632bdc6143432541b4d43da13ef40">notify_on_release</a>
<a name="l00250"></a>00250                  ? <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#13f48d31bfdcb3e16b71b6d4a1fa7550">RELEASE_NOTIFY_ON</a>(*path_))
<a name="l00251"></a>00251                  : <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(<a class="code" href="cpuset_8cpp.html#fbd232f01cb619c5b5d10976fac11786">RELEASE_NOTIFY_OFF</a>(*path_)));
<a name="l00252"></a>00252     <span class="keywordflow">if</span> (ret)
<a name="l00253"></a>00253         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"configuring notify on release for cpuset '%s'"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00254"></a>00254 
<a name="l00255"></a>00255     parent_-&gt;<a class="code" href="classcpuset.html#5798a5cd9641af259d08a0ceb5c03866">children_</a>.push_back(<span class="keyword">this</span>);
<a name="l00256"></a>00256 }

</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dd1e3abc75e7c93b58250779743ea7e0"></a><!-- doxytag: member="cpuset::~cpuset" ref="dd1e3abc75e7c93b58250779743ea7e0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cpuset::~cpuset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A cpuset cannot be removed if the cpuset is in use: has cpusets inside, or has processes attached. 
<p>
Definition at line <a class="el" href="cpuset_8cpp-source.html#l00279">279</a> of file <a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a>.
<p>
References <a class="el" href="program__IO_8h-source.html#l00146">C</a>, <a class="el" href="program__IO_8h-source.html#l00147">CP</a>, <a class="el" href="cpuset_8cpp-source.html#l00062">CS_CPRINT</a>, and <a class="el" href="cpuset_8cpp-source.html#l00067">CS_REPORT</a>.<div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281     <span class="keywordtype">int</span> ret;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <a class="code" href="cpuset_8cpp.html#ba4d20a474d7a8a649dc20517f78e8f9">CS_CPRINT</a>(<span class="stringliteral">"Deleting CPU set with name '%s'\n"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <span class="comment">// delete children</span>
<a name="l00286"></a>00286     cpuset_vector_t::iterator i = children_.begin();
<a name="l00287"></a>00287     cpuset_vector_t::iterator e = children_.end();
<a name="l00288"></a>00288     <span class="keywordflow">for</span> ( ; i != e; ++i)
<a name="l00289"></a>00289     {
<a name="l00290"></a>00290         <a class="code" href="cpuset_8cpp.html#ba4d20a474d7a8a649dc20517f78e8f9">CS_CPRINT</a>(<span class="stringliteral">"Deleting child '%s'\n"</span>, <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>((*i)-&gt;name()));
<a name="l00291"></a>00291         <span class="keyword">delete</span> *i;
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294     ret = chdir(<span class="stringliteral">"/"</span>);
<a name="l00295"></a>00295     <span class="keywordflow">if</span> (ret)
<a name="l00296"></a>00296         <a class="code" href="cpuset_8cpp.html#bfd0995518dfb7f1fc4bbcf0bfff6378">CS_REPORT</a>(<span class="stringliteral">"%s: unable to \"cd /\" in order to unmount set"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00297"></a>00297 
<a name="l00298"></a>00298     <span class="keywordflow">if</span> (parent_)
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300         ret = rmdir(<a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(path_));
<a name="l00301"></a>00301         <span class="keywordflow">if</span> (ret)
<a name="l00302"></a>00302             <a class="code" href="cpuset_8cpp.html#bfd0995518dfb7f1fc4bbcf0bfff6378">CS_REPORT</a>(<span class="stringliteral">"%s: failed to remove CPUset: rmdir() failed"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_));
<a name="l00303"></a>00303     } <span class="keywordflow">else</span>
<a name="l00304"></a>00304         remove_root_cpuset();
<a name="l00305"></a>00305 
<a name="l00306"></a>00306     <span class="keyword">delete</span> name_;
<a name="l00307"></a>00307     <span class="keyword">delete</span> path_;
<a name="l00308"></a>00308     <span class="keyword">delete</span> CPUs_;
<a name="l00309"></a>00309     <span class="keyword">delete</span> pids_;
<a name="l00310"></a>00310 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="8193a0d34a534ced54021c5ee5a7ea47"></a><!-- doxytag: member="cpuset::cpu_is_exclusive" ref="8193a0d34a534ced54021c5ee5a7ea47" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cpuset::cpu_is_exclusive           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00088">88</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00088"></a>00088 { <span class="keywordflow">return</span> cpu_is_exclusive_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d93a5e2b7fc41b8ed964b6d9d815c09d"></a><!-- doxytag: member="cpuset::mem_is_exclusive" ref="d93a5e2b7fc41b8ed964b6d9d815c09d" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cpuset::mem_is_exclusive           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00089">89</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00089"></a>00089 { <span class="keywordflow">return</span> mem_is_exclusive_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5d8d12278e318a2b9d037bd4e787f74e"></a><!-- doxytag: member="cpuset::migrate_memory" ref="5d8d12278e318a2b9d037bd4e787f74e" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cpuset::migrate_memory           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00090">90</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00090"></a>00090 { <span class="keywordflow">return</span> migrate_memory_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fc1632bdc6143432541b4d43da13ef40"></a><!-- doxytag: member="cpuset::notify_on_release" ref="fc1632bdc6143432541b4d43da13ef40" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cpuset::notify_on_release           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00091">91</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00091"></a>00091 { <span class="keywordflow">return</span> notify_on_release_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7c478b56188544448ec57eef513ff676"></a><!-- doxytag: member="cpuset::path" ref="7c478b56188544448ec57eef513ff676" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; cpuset::path           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00093">93</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00093"></a>00093 { <span class="keywordflow">return</span> *path_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9e97d1c20a27fa0a25263eccce27b84b"></a><!-- doxytag: member="cpuset::name" ref="9e97d1c20a27fa0a25263eccce27b84b" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; cpuset::name           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00094">94</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.
<p>
Referenced by <a class="el" href="cpuset__manager_8cpp-source.html#l00039">cpuset_manager::cpuset_manager()</a>, <a class="el" href="cpuset_8cpp-source.html#l00576">print()</a>, and <a class="el" href="cpuset__manager_8cpp-source.html#l00113">cpuset_manager::remove_set()</a>.<div class="fragment"><pre class="fragment"><a name="l00094"></a>00094 { <span class="keywordflow">return</span> *name_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d1aa42aeb69e49f03e118ba96e590325"></a><!-- doxytag: member="cpuset::CPUs" ref="d1aa42aeb69e49f03e118ba96e590325" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="cpuset_8h.html#03658338ac8779ffa33ef3186667ac97">cpu_vector_t</a>&amp; cpuset::CPUs           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00096">96</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00096"></a>00096 { <span class="keywordflow">return</span> *CPUs_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f516975f2cdf0589a2dc033271a7fb03"></a><!-- doxytag: member="cpuset::pids" ref="f516975f2cdf0589a2dc033271a7fb03" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="cpuset_8h.html#371dad33c80e1c2ca7f98fd51ff44f5a">pid_vector_t</a>&amp; cpuset::pids           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="cpuset_8h-source.html#l00097">97</a> of file <a class="el" href="cpuset_8h-source.html">cpuset.h</a>.<div class="fragment"><pre class="fragment"><a name="l00097"></a>00097 { <span class="keywordflow">return</span> *pids_; }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a1e448d1ccfce7466e0d31f1ebaf34fa"></a><!-- doxytag: member="cpuset::add_task" ref="a1e448d1ccfce7466e0d31f1ebaf34fa" args="(pid_t process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpuset::add_task           </td>
          <td>(</td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>pid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add the process 'pid' to the cpuset. 
<p>
Definition at line <a class="el" href="cpuset_8cpp-source.html#l00554">554</a> of file <a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a>.
<p>
References <a class="el" href="program__IO_8h-source.html#l00146">C</a>, <a class="el" href="program__IO_8h-source.html#l00147">CP</a>, <a class="el" href="cpuset_8cpp-source.html#l00065">CS_ERROR</a>, and <a class="el" href="cpuset_8cpp-source.html#l00046">X</a>.<div class="fragment"><pre class="fragment"><a name="l00555"></a>00555 {
<a name="l00556"></a>00556     <span class="keywordtype">int</span> length = 0;
<a name="l00557"></a>00557     <span class="keywordflow">for</span> (pid_t x = pid ; x ; x /= 10)
<a name="l00558"></a>00558         ++length; 
<a name="l00559"></a>00559     
<a name="l00560"></a>00560     <span class="keywordtype">char</span> digits[length + 1];
<a name="l00561"></a>00561     sprintf(digits, <span class="stringliteral">"%u"</span>, pid);
<a name="l00562"></a>00562     std::string cmd(ECHO + <a class="code" href="cpuset_8cpp.html#83363db3aa5aef14d0781fc03d24a747">X</a>(digits) + <a class="code" href="cpuset_8cpp.html#83363db3aa5aef14d0781fc03d24a747">X</a>(<span class="stringliteral">" &gt; tasks"</span>));
<a name="l00563"></a>00563 
<a name="l00564"></a>00564     <span class="keywordtype">int</span> ret = system(<a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(cmd));
<a name="l00565"></a>00565     <span class="keywordflow">if</span> (ret)
<a name="l00566"></a>00566         <a class="code" href="cpuset_8cpp.html#103c747cab8af0d066f1e7796da46053">CS_ERROR</a>(<span class="stringliteral">"%s: Failed adding task %u: %s"</span>, <a class="code" href="program__IO_8h.html#fcb0cf198b5cf0601aa7170a1b8f9081">CP</a>(name_), pid, <a class="code" href="program__IO_8h.html#bbffbb43a09bb37f0f9abf6baf2a3bec">C</a>(cmd));
<a name="l00567"></a>00567 
<a name="l00568"></a>00568     pids_-&gt;push_back(pid);
<a name="l00569"></a>00569 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="48e1ee76a44b537e36ca5427a020db1e"></a><!-- doxytag: member="cpuset::print" ref="48e1ee76a44b537e36ca5427a020db1e" args="(void) const" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cpuset::print           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Puts out everything we know. 
<p>
Definition at line <a class="el" href="cpuset_8cpp-source.html#l00576">576</a> of file <a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a>.
<p>
References <a class="el" href="cpuset_8h-source.html#l00094">name()</a>.
<p>
Referenced by <a class="el" href="cpuset_8cpp-source.html#l00622">operator&lt;&lt;()</a>.<div class="fragment"><pre class="fragment"><a name="l00577"></a>00577 {
<a name="l00578"></a>00578     std::ostringstream o;
<a name="l00579"></a>00579     o &lt;&lt; <span class="stringliteral">"name: "</span> &lt;&lt; *name_
<a name="l00580"></a>00580       &lt;&lt; <span class="stringliteral">"\npath: "</span> &lt;&lt; *path_;
<a name="l00581"></a>00581 
<a name="l00582"></a>00582     o &lt;&lt; <span class="stringliteral">"\n#CPUs in set == "</span> &lt;&lt; CPUs_-&gt;size() &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00583"></a>00583     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; CPUs_-&gt;size(); ++i)
<a name="l00584"></a>00584         o &lt;&lt; (*CPUs_)[i] &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586     o &lt;&lt; <span class="stringliteral">"\nProcesses in set == "</span> &lt;&lt; pids_-&gt;size() &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00587"></a>00587     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; pids_-&gt;size(); ++i)
<a name="l00588"></a>00588         o &lt;&lt; (*pids_)[i] &lt;&lt; <span class="stringliteral">" "</span>;
<a name="l00589"></a>00589 
<a name="l00590"></a>00590     o &lt;&lt; <span class="stringliteral">"\nCPU exclusive: "</span> &lt;&lt; (cpu_is_exclusive_ ? <span class="stringliteral">"Yes"</span> : <span class="stringliteral">"No"</span>)
<a name="l00591"></a>00591       &lt;&lt; <span class="stringliteral">"\nmem exclusive: "</span> &lt;&lt; (mem_is_exclusive_ ? <span class="stringliteral">"Yes"</span> : <span class="stringliteral">"No"</span>)
<a name="l00592"></a>00592       &lt;&lt; <span class="stringliteral">"\nmigrate memory: "</span> &lt;&lt; (migrate_memory_ ? <span class="stringliteral">"Yes"</span> : <span class="stringliteral">"No"</span>)
<a name="l00593"></a>00593       &lt;&lt; <span class="stringliteral">"\nnotify on release: "</span> &lt;&lt; (notify_on_release_ ? <span class="stringliteral">"Yes"</span> : <span class="stringliteral">"No"</span>) &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="keywordflow">if</span> (parent_)
<a name="l00596"></a>00596         o &lt;&lt; <span class="stringliteral">"Child CPUset of '"</span> &lt;&lt; parent_-&gt;<a class="code" href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b">name</a>() &lt;&lt; <span class="stringliteral">"'\n"</span>;
<a name="l00597"></a>00597     <span class="keywordflow">else</span>
<a name="l00598"></a>00598         o &lt;&lt; <span class="stringliteral">"This is the root cpuset: no one's child\n"</span>;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600     o &lt;&lt; <span class="stringliteral">"Num child cpusets: "</span> &lt;&lt; children_.size() &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00601"></a>00601     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; children_.size(); ++i)
<a name="l00602"></a>00602     {
<a name="l00603"></a>00603         o &lt;&lt; <span class="stringliteral">"["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"]: \n"</span>
<a name="l00604"></a>00604           &lt;&lt; DELIMITER &lt;&lt; <span class="stringliteral">"\n"</span>
<a name="l00605"></a>00605           &lt;&lt; *(children_[i]) &lt;&lt; <span class="stringliteral">"\n"</span>
<a name="l00606"></a>00606           &lt;&lt;  DELIMITER &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00607"></a>00607     }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609     <span class="keywordflow">return</span> o.str();
<a name="l00610"></a>00610 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="classcpuset_48e1ee76a44b537e36ca5427a020db1e_cgraph.png" border="0" usemap="#classcpuset_48e1ee76a44b537e36ca5427a020db1e_cgraph_map" alt=""></center>
<map name="classcpuset_48e1ee76a44b537e36ca5427a020db1e_cgraph_map">
<area href="classcpuset.html#9e97d1c20a27fa0a25263eccce27b84b" shape="rect" coords="163,5,278,32" alt="">
</map>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="cpuset_8h-source.html">cpuset.h</a><li>source/<a class="el" href="cpuset_8cpp-source.html">cpuset.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Apr 5 09:39:48 2007 for CIL Systems Programming Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
